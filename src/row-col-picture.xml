<?xml version="1.0" encoding="UTF-8"?>

<!--********************************************************************
Copyright 2022 Dan Margalit and Joseph Rabinoff

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation.  A copy of
the license is included in gfdl.xml.
*********************************************************************-->

<section xml:id="row-col-picture">
  <title>Row and Column Pictures</title>

  <objectives>
    <ol>
      <li>Understand the relationship between the solution set of <m>Ax=0</m> and the solution sets of <m>Ax=b</m> for different values of <m>b</m>.</li>
      <li>Learn to express a solution set as a (translate of a) span.</li>
      <li>Understand the relationship between the span of the columns of <m>A</m> and the consistency of the system <m>Ax=b</m>.</li>
      <li>Learn to visualize the system of equations <m>Ax=b</m> for varying values of <m>b</m> using the row and column pictures.</li>
      <li><em>Recipe:</em> parametric vector form.</li>
      <li><em>Pictures:</em> the solution sets of <m>Ax=b</m> for varying values of <m>b</m>, the column picture criterion for consistency, the row and column pictures combined.</li>
      <li><em>Theorems:</em> the solution set of <m>Ax=0</m> is a span, the column picture criterion of consistency.</li>
      <li><em>Vocabulary words:</em> <term>row picture,</term> <term>column picture,</term> <term>parametric vector form,</term> <term>particular solution,</term> <term>homogeneous equation,</term> <term>inhomogeneous equation,</term> <term>trivial solution,</term> <term>nontrivial solution.</term></li>
    </ol>
  </objectives>

  <introduction>
    <idx><h>Row picture</h></idx>
    <idx><h>Column picture</h></idx>
    <p>
      In this section we describe the solution sets of a system of equations <m>Ax=b</m> for varying values of <m>b</m>, as well as the set of all <m>b</m> making <m>Ax=b</m> consistent, in terms of spans.  This allows us to draw pictures of both of these objects of interest.  We separate the pictures into two sides: the <term>row picture</term> will contain the <m>x</m>-vectors (solutions), and the <term>column picture</term> will contain the <m>b</m>-vectors (constants).
    </p>
    <p>
      Varying the vector <m>b</m> in <m>Ax=b</m> introduces a new level of complexity.  We treated this question computationally in <xref ref="lu-decomposition"/>; conceptually, varying <m>b</m> gives us a richer understanding of a system of equations.
    </p>
  </introduction>

  <subsection>
    <title>The Row Picture</title>
    <idx><h>Row picture</h></idx>

    <p>
      The row picture contains the solution set of a systems of equations.  In order to relate solution sets to spans, we first show how to write the solutions of a system of equations in terms of <em>vectors.</em>  This is a slight modification of the  <xref ref="parametric-form-algo"/> for computing the parametric form of a solution set.
    </p>

    <algorithm xml:id="parametric-vector-form-algo">
      <title>Parametric Vector Form</title>
      <idx><h>Parametric vector form</h></idx>
      <idx><h>System of linear equations</h><h>parametric vector form of</h><see>Parametric vector form</see></idx>
      <p>
        The <term>parametric vector form</term> of the solution set of a consistent system of linear equations is obtained as follows.
      </p>
      <p>
        First find the parametric form of the system, as in this <xref ref="parametric-form-algo"/>.
        <me>
          \syseq{x_1 + 2x_2 + 2x_3 + x_4 = 2; 2x_1 + 4x_2 + x_3 - x_4 = -2}
          \rowop{\text{becomes}}
          \syseq{x_1 = -2 - 2x_2 + x_4; x_3 = 2 \+ \. - x_4}
        </me>
        <ol start="4">
          <li>
            Add trivial equations for the free variables, in order.  Organize the right side of the equations into columns.
            <me>
              \def\r{\color{seq-red}}
              \syseq{
                x_1 = -2 - 2x_2 + x_4;
                \r x_2 \mathbin{\r=} \. \+ \r x_2;
                x_3 = 2 \+ \. - x_4;
                \r x_4 \mathbin{\r=} \. \+ \. \+ \r x_4
              }
            </me>
          </li>
          <li>
            Gather the columns into vectors.  Pull out the free variables as scalar multiples.
            <me>
              \vec{x_1 x_2 x_3 x_4} = \vec{-2 0 2 0} + x_2\vec{-2 1 0 0} + x_4\vec{1 0 -1 1}.
            </me>
          </li>
        </ol>
        The result is
        <me>
          x = \vec[c]{\text{a constant} \text{vector}}
          + \vec[c]{\text{any \emph{linear combination} of some vectors}
                    \text{with the free variables as weights}}.
        </me>
      </p>
    </algorithm>

    <p>
      <idx><h>Parametric vector form</h><h>particular solution</h></idx>
      <idx><h>Particular solution</h><see>Parametric vector form</see></idx>
      <idx><h>System of linear equations</h><h>particular solution of</h><see>Parametric vector form</see></idx>
      The constant vector is the solution of <m>Ax=b</m> that is obtained by setting all of the free variables equal to zero.  It is called a <term>particular solution</term>.
    </p>

    <example xml:id="parametric-vector-form-eg-line">
      <statement>
        <p>
          Find the parametric vector form of the solutions of this system of equations
          <me>
            \syseq{2x + y + 12z = 1; x + 2y + 9z = -1}
          </me>
          from this <xref ref="parametric-form-eg-line"/>.
        </p>
      </statement>
      <answer>
        <p>
          We computed the parametric form to be
          <me>
            \syseq{x = 1 - 5z; y = -1 - 2z\rlap.}
          </me>
          We add the trivial equation <m>z=z</m> and organize into columns:
          <me>
            \syseq{
              x = 1 - 5z;
              y = -1 - 2z;
              z = \. \+ z
            }
            \quad\xrightarrow[\text{vector form}]{\text{parametric}}\quad
            \vec{x y z} = \vec{1 -1 0} + z\vec{-5 -2 1}.
          </me>
          This is the line through <m>(1,-1,0)</m> (the particular solution) in the direction of <m>(-5,-2,1)</m>.
        </p>
      </answer>
    </example>

    <example xml:id="parametric-vector-form-eg-plane">
      <statement>
        <p>
          Find the parametric vector form of the solutions of the linear equation
          <me>x + y + z = 1</me>
          from this <xref ref="parametric-form-eg-plane"/>.
        </p>
      </statement>
      <answer>
        <p>
          We computed the parametric form to be
          <me>
            x = 1 - y - z.
          </me>
          We add the trivial equations <m>y=y</m> and <m>z=z</m> and organize into columns:
          <me>
            \syseq{x = 1 - y - z; y = \. \+ y; z = \. \+ \. \+ z}
            \quad\xrightarrow[\text{vector form}]{\text{parametric}}\quad
            \vec{x y z} = \vec{1 0 0} + y\vec{-1 1 0} + z\vec{-1 0 1}.
          </me>
          This is the plane through <m>(1,0,0)</m> (the particular solution) and the two solutions <m>(1,0,0)+(-1,1,0)</m> and <m>(1,0,0)+(-1,0,1)</m>.
        </p>
      </answer>
    </example>

    <paragraphs>
      <title>Homogeneous Equations</title>

      <p>
        The solution set of <m>Ax=b</m> is not a span if <m>b\neq 0</m>.  Indeed, any span contains the zero vector, and if <m>0</m> is a solution of <m>Ax=b</m>, then <m>A0=b</m> is satisfied, whence <m>b=0</m>.  If <m>b=0</m> then the solution set is in fact a span, as we will see.
      </p>

      <definition>
        <idx><h>System of linear equations</h><h>homogeneous</h></idx>
        <idx><h>System of linear equations</h><h>inhomogeneous</h></idx>
        <idx><h>Homogeneous</h><see>System of linear equations</see></idx>
        <idx><h>Inhomogeneous</h><see>System of linear equations</see></idx>
        <statement>
          <p>
            A system of linear equations of the form <m>Ax=b</m> is called <term>homogeneous</term> if <m>b=0</m> and <term>inhomogeneous</term> otherwise.
          </p>
        </statement>
      </definition>

      <p>
        A homogeneous system of equations is simply a system of equations where all the constant terms are equal to zero:
        <me>
          \def\r{\textcolor{seq-red}}
          \syseq{x_1 + 2x_2 + 2x_3 + x_4 = \r0; 2x_1 + 4x_2 + x_3 - x_4 = \r0\rlap.}
        </me>
        A homogeneous system is always admits the solution <m>x=0</m>.
      </p>

      <bluebox>
        <p>
          A homogeneous system of equations is <em>always consistent</em>.
        </p>
      </bluebox>

      <p>
        Since the solution <m>x=0</m> of the homogeneous system <m>Ax=0</m> really has nothing to do with the matrix <m>A</m>, it is not very interesting.
      </p>

      <definition>
        <idx><h>System of linear equations</h><h>trivial solution</h></idx>
        <idx><h>System of linear equations</h><h>nontrivial solution</h></idx>
        <idx><h>System of linear equations</h><h>homogeneous</h><h>trivial solution</h></idx>
        <idx><h>Trivial solution</h><see>System of linear equations</see></idx>
        <idx><h>Nontrivial solution</h><see>System of linear equations</see></idx>
        <statement>
          <p>
            The solution <m>x=0</m> of the homogeneous system <m>Ax=0</m> is called the <term>trivial solution</term>.  Any nonzero solution is called <term>nontrivial</term>.
          </p>
        </statement>
      </definition>

      <p>
        In order for <m>Ax=0</m> to have a nonzero solution, it must have infinitely many solutions; according to this <xref ref="number-of-solutions"/> and this <xref ref="free-variable-defn"/>, this means it must have a <em>free variable.</em>
      </p>

      <bluebox>
        <idx><h>System of linear equations</h><h>nontrivial solution</h><h>and free variables</h></idx>
        <p>
          The homogeneous matrix equation <m>Ax=0</m> has a nontrivial solution if and only if <m>A</m> has a free variable.
        </p>
      </bluebox>

      <example xml:id="solnsets-eg-no-nontrivial">
        <title>No Nontrivial Solutions</title>
        <statement>
          <p>
            What is the solution set of <m>Ax=0</m>, where
            <me>A = \mat{1 3 4; 2 -1 2; 1 0 1}?</me>
          </p>
        </statement>
        <answer>
          <p>We form an augmented matrix and find its row echelon form:
          <me>
            \amat{1 3 4 0; 2 -1 2 0; 1 0 1 0} \REF
            \amat{1 3 4 0; 0 -7 -6 0; 0 0 -\frac37 0}.
          </me>
          There are no free variables, so the only solution is the trivial solution <m>x=0</m>.
          </p>
        </answer>
      </example>

      <observation xml:id="solnsets-no-augment">
        <p>
          When performing row operations on the augmented matrix for a homogeneous system of linear equations, the last column will always be zero.  We saw this in the last <xref ref="solnsets-eg-no-nontrivial"/>:
          <me>\amat{1 3 4 0; 2 -1 2 0; 1 0 1 0}</me>
          For this reason, we will generally omit the augmented column when solving homogeneous systems.
        </p>
      </observation>

      <observation xml:id="homog-soln-set-is-span" hide-type="true">
        <title>When the Particular Solution is Zero</title>
        <p>
          When computing the parametric vector form of the solution set of a system of equations, the particular solution contains the constants on the right side of the equations in reduced row echelon form.  For instance,
          <me>
            \def\r{\textcolor{seq-red}}
            \begin{split}
              \amat{1 2 2 1 2; 2 4 1 -1 -2}
              \RREF&amp;
              \amat{1 2 0 -1 \r{-2}; 0 0 1 1 \r2} \\
              \rowop{\text{becomes}}&amp;
              \syseq{
                x_1 = \r{-2} - 2x_2 + x_4;
                x_2 = \. \+ x_2;
                x_3 = \r2 \+ \. - x_4;
                x_4 = \. \+ \. \+ x_4
              } \\
              \rowop{\text{PVF}}&amp;
              \vec{x_1 x_2 x_3 x_4}
              =
              \vec{\r{-2} 0 \r2 0} + x_2\vec{-2 1 0 0} + x_4\vec{1 0 -1 1}.
            \end{split}
          </me>
          If <m>b=0</m> then the augmented column in the reduced row echelon form is zero, so the particular solution is zero.  In this case, the general solution is a linear combination of some number of vectors, with the free variables as weights.  In the above example,
          <me>
            \def\r{\textcolor{seq-red}}
            \begin{split}
              \amat{1 2 2 1 \r0; 2 4 1 -1 \r0}
              \RREF&amp;
              \amat{1 2 0 -1 \r0; 0 0 1 1 \r0} \\
              \rowop{\text{becomes}}&amp;
              \syseq{
                x_1 = \r0 - 2x_2 + x_4;
                x_2 = \r0 + x_2;
                x_3 = \r0 \+ \. - x_4;
                x_4 = \r0 \+ \. \+ x_4
              } \\
              \rowop{\text{PVF}}&amp;
              \vec{x_1 x_2 x_3 x_4}
              = \vec{\r0 \r0 \r0 \r0} + x_2\vec{-2 1 0 0} + x_4\vec{1 0 -1 1}.
            \end{split}
          </me>
          The solution set is the set of all linear combinations of the vectors <m>(-2,1,0,0)</m> and <m>(1,0,-1,1)</m>, so
          <me>
            \text{(solution set)} = \Span\left\{\vec{-2 1 0 0},\;\vec{1 0 -1 1}\right\}.
          </me>
        </p>
      </observation>

      <bluebox>
        <title>Fact</title>
        <idx><h>Solution set</h><h>of a homogeneous system is a span</h></idx>
        <p>
          In the parametric vector form of the solutions of <m>Ax=0</m>, the particular solution is the zero vector.  The solution set is the <em>span</em> of the other vectors.
        </p>
      </bluebox>

      <example xml:id="solnsets-eg-line">
        <title>The Solution Set is a Line</title>
        <statement>
          <p>
            Write the solution set of <m>Ax=0</m> as a span, where
            <me>A = \mat{1 -3; 2 -6},</me>
            and draw the solution set.
          </p>
        </statement>

        <answer>
          <p>
            We perform Gauss<ndash/>Jordan elimination (without augmenting, as suggested in the above <xref ref="solnsets-no-augment"/>):
            <me>
              \mat{1 -3; 2 -6} \RREF \mat{1 -3; 0 0}.
            </me>
            This corresponds to the single equation <m>x_1 - 3x_2=0</m>.  We write the parametric form including the redundant equation <m>x_2=x_2</m>:
            <me>\syseq{x_1 = 3x_2; x_2 = x_2\rlap.}</me>
            We turn these into a single vector equation:
            <me>x = \vec{x_1 x_2} = x_2\vec{3 1}.</me>
            This is the parametric vector form of the solution set. Since <m>x_2</m> is allowed to be anything, this says that the solution set is the set of all scalar multiples of <m>{3\choose 1}</m>, otherwise known as
            <me>\Span\left\{\vec{3 1}\right\}.</me>
            We know how to draw the picture of a span of a vector: it is a line.  Therefore, this is a picture of the the solution set:
            <latex-code>
              <![CDATA[
\begin{tikzpicture}
  \path[clip] (-6,-2) rectangle (6,2);
  \draw[grid lines] (-6,-2) grid (6,2);
  \draw[thick] (-6,0) -- (6,0);
  \draw[thick] (0,-2) -- (0,2);
  \draw[seq4] (-6,-2) -- node[pos=.4, below=1pt, sloped, whitebg, thin border]
   {$Ax=0$} (6,2);
  \draw[vector, seq-green] (0,0) -- (3,1);
\end{tikzpicture}
              ]]>
            </latex-code>
          </p>
        </answer>
      </example>

      <example xml:id="solnsets-eg-plane">
        <title>The Solution Set is a Plane</title>
        <statement>
          <p>
            Write the solution set of <m>Ax=0</m> as a span, where
            <me>A = \mat{1 -1 2; -2 2 -4},</me>
            and draw the solution set.
          </p>
        </statement>

        <answer>
          <p>
            We perform Gauss<ndash/>Jordan elimination (without augmenting, as suggested in the above <xref ref="solnsets-no-augment"/>):
            <me>
              \mat{1 -1 2; -2 2 -4} \RREF \mat{1 -1 2; 0 0 0}.
            </me>
            This corresponds to the single equation <m>x_1 - x_2 + 2x_3 = 0</m>.  We write the parametric form including the redundant equations <m>x_2=x_2</m> and <m>x_3=x_3</m>:
            <me>\syseq{x_1 = x_2 - 2x_3; x_2 = x_2; x_3 = \. \+ x_3\rlap.}</me>
            We turn these into a single vector equation:
            <me>x = \vec{x_1 x_2 x_3} = x_2\vec{1 1 0} + x_3\vec{-2 0 1}.</me>
            This is the parametric vector form of the solution set.  Since <m>x_2</m> and <m>x_3</m> are allowed to be anything, this says that the solution set is the set of all linear combinations of <m>(1, 1, 0)</m> and <m>(-2, 0, 1)</m>.  In other words, the solution set is
            <me>\Span\left\{\vec{1 1 0},\;\vec{-2 0 1}\right\}.</me>
            We know how to draw the span of two noncollinear vectors in <m>\R^3</m>: it is a plane.  Therefore, this is a picture of the solution set:
            <latex-code>
              <![CDATA[
  \begin{tikzpicture}[myxyz]
    \path[clip, resetxy] (-6,-4) rectangle (6,4);

    \def\v{(1, 1, 0)}
    \def\w{(-2, 0, 1)}

    \node[coordinate] (X) at \v {};
    \node[coordinate] (Y) at \w {};

    \draw (0,0,-3) -- (0,0,0);

    \begin{scope}[x=(X), y=(Y), transformxy]
      \path[clip] (-5, 0) -- (-5, -5) -- (5, -5) -- (5, 0) -- cycle;
      \fill[seq4!30, nearly opaque] (-3,-2) rectangle (3,2);
      \draw[step=1cm, seq4, very thin] (-3,-2) grid (3,2);
    \end{scope}

    \begin{scope}[transformxy]
      \fill[white, nearly opaque] (-3, -3) rectangle (3, 3);
      \draw[grid lines] (-3, -3) grid (3, 3);
      \draw[->] (-3,0) -- (3,0);
      \draw[->] (0,-3) -- (0,3);
    \end{scope}

    \begin{scope}[x=(X), y=(Y), transformxy]
      \path[clip] (-5, 0) -- (-5, 5) -- (5, 5) -- (5, 0) -- cycle;
      \fill[seq4!30, nearly opaque] (-3,-2) rectangle (3,2);
      \draw[step=1cm, seq4, very thin] (-3,-2) grid (3,2);
    \end{scope}

    \draw[->] (0,0,0) -- (0,0,3);

    \draw[vector, seq1] (0,0,0) -- \v node[below] {$(-2,0,1)$};
    \draw[vector, seq2] (0,0,0) -- \w node[above] {$(1,1,1)$};
    \draw[thin, densely dotted] \w -- \projxy\w;

    \node[seq4, anchor=south east] at (-3,-2.5,.5) {$Ax=0$};

    \point at (0,0,0);

  \end{tikzpicture}
              ]]>
            </latex-code>
          </p>
        </answer>
      </example>

    </paragraphs>

    <paragraphs>
      <title>Inhomogeneous Equations</title>

      <p>
        Recall that the matrix equation <m>Ax=b</m> is called <term>inhomogeneous</term> when <m>b\neq 0</m>.  Note that an inhomogeneous system can be inconsistent.
      </p>

      <p>
        We saw in the <xref ref="homog-soln-set-is-span"/> above that the nonzero numbers on the right side of an inhomogeneous system of equations lead to nonzero numbers in the particular solution in the parametric vector form:
        <me>
          \amat{1 2 2 1 2; 2 4 1 -1 -2}
          \rowop{\text{PVF}}
          \vec{x_1 x_2 x_3 x_4} =
          \vec{-2 0 2 0} + x_2\vec{-2 1 0 0} + x_4\vec{1 0 -1 1}.
        </me>
        However, this is the <em>only difference</em> between the parametric vector forms of <m>Ax=b</m> and of <m>Ax=0</m>:
        <me>
          \amat{1 2 2 1 0; 2 4 1 -1 \phantom-0}
          \rowop{\text{PVF}}
          \vec{x_1 x_2 x_3 x_4} =
          \vec{\phantom-0 0 0 0} + x_2\vec{-2 1 0 0} + x_4\vec{1 0 -1 1}.
        </me>
        In this case, the solutions of <m>Ax=b</m> are obtained by adding the particular solution <m>(-2,0,2,0)</m> to any solution of <m>Ax=0</m>.  The solution set of <m>Ax=0</m> is a span, so we write
        <me>
          \text{(solutions of $Ax=b$)}
          = \vec{-2 0 2 0} + \Span\left\{\vec{-2 1 0 0},\;\vec{1 0 -1 1}\right\}.
        </me>
        The solution set of <m>Ax=b</m> is a <em>translate of a span</em>.
      </p>

      <bluebox xml:id="solnsets-translate-span">
        <idx><h>Solution set</h><h>translate of a span</h></idx>
        <p>
          The solution set of a consistent system <m>Ax=b</m> is obtained by translating the solution set of <m>Ax=0</m> by the particular solution:
          <latex-code>
            <![CDATA[
\begin{tikzpicture}

  \def\r{\color{seq-red}}

  \node (A1) {$\vec[c]{\text{solutions of} Ax=0}$};
  \node[right=0pt of A1] (A2) {$=$};

  \node[below=of A1] (B1) {$\vec[c]{\text{solutions of} Ax=b}$};
  \node[right=0pt of B1] (B2) {$=$};
  \node[right=0pt of B2] (B3) {$\vec[c]{\text{particular} \text{solution}}$};
  \node[right=0pt of B3] (B4) {$+$};
  \node[right=0pt of B4] (B5) {$\Span\left\{\spalignvector*{\text{\r vectors} \text{\r from PVF}}\right\}$};
  \coordinate (B3') at ($(B2.east)!.5!(B4.west)$);

  \node[color=black!50!white] (A3) at (B3'|-A2.center) {(zero)};
  \node[anchor=west] (A4) at (B4.west |- A3.center) {$+$};
  \node[right=0pt of A4] (A5) {$\Span\left\{\spalignvector*{\text{\r vectors} \text{\r from PVF}}\right\}$};

  \draw[<->, very thick, seq-red]
  ($(B5.north) + (8mm,0)$) to["same\\vectors" {align=center, black, font=\small}]
  ($(A5.south) + (8mm,0)$);

\end{tikzpicture}
            ]]>
          </latex-code>
          The solution set of <m>Ax=b</m> is a translate of a span.
        </p>
      </bluebox>

      <p>
        More specifically, the solution set of <m>Ax=b</m> is obtained as follows: we begin with the particular solution <m>p</m>, then we add all linear combinations of the vectors in the parametric vector form of the solution set of <m>Ax=0</m>.  Geometrically, this is first accomplished by drawing the solution set of <m>Ax=0</m>, then <em>translating</em>, or pushing, this span from the origin to <m>p</m>.  The result is a geometric space that is <em>parallel</em> to the solution set of <m>Ax=0</m>.
        <latex-code>
          <![CDATA[
\begin{tikzpicture}[thin border nodes]
  \draw[grid lines] (-6,-2) grid (6,3);
  \path[clip] (-6,-2) rectangle (6,3);
  \draw (-6,0) -- (6,0);
  \draw (0,-2) -- (0,3);
  \draw[seq2] (-6,-2) -- node[pos=.8,below=1mm,sloped,whitebg] {$Ax=0$} (6,2);
  \draw[seq4] (-6,-1) -- node[pos=.7,above=1mm,sloped,whitebg] {$Ax=b$} (6,3);
  \point (a) at (-3,0);
  \draw[->, vector, seq3] (0,0) -- node[pos=.3,above=1pt] {$p$} (a);
  \point at (0,0);
\end{tikzpicture}
          ]]>
        </latex-code>
      </p>

      <remark>
        <p>
          In fact, the solution set of <m>Ax=b</m> is obtained from the solution set of <m>Ax=0</m> by translating by <em>any</em> solution <m>p</m> of <m>Ax=b</m>.  Indeed, if <m>Ap=b</m> and <m>Ax=0</m> then
          <m>A(p+x) = Ap + Ax = b + 0 = 0,</m>
          so <m>p+x</m> is a solution of <m>Ax=b</m>; conversely, if <m>q</m> is another solution of <m>Ax=b</m> then
          <me> A(q-p) = Aq - Ap = b - b = 0, </me>
          so that <m>x=q-p</m> is a solution of <m>Ax=0</m>, and <m>q = p + x</m>.
          <latex-code>
            <![CDATA[
\begin{tikzpicture}[thin border nodes]
  \draw[grid lines] (-6,-2) grid (6,3);
  \path[clip] (-6,-2) rectangle (6,3);
  \draw (-6,0) -- (6,0);
  \draw (0,-2) -- (0,3);
  \draw[seq2] (-6,-2) -- node[pos=.8,below=1mm,sloped,whitebg] {$Ax=0$} (6,2);
  \draw[seq4] (-6,-1) -- node[pos=.7,above=1mm,sloped,whitebg] {$Ax=b$} (6,3);
  \point (a) at (-3,0);
  \point (b) at (.5,{1+.5/3});
  \draw[->, vector, seq3] (0,0) -- node[pos=.3,above=1pt] {$p$} (a);
  \draw[->, vector, seq3] (0,0) -- node[pos=.6,below right] {$q$} (b);
  \point at (0,0);
\end{tikzpicture}
            ]]>
          </latex-code>
        </p>
      </remark>

      <bluebox>
        <p>
          The solution sets of the matrix equation <m>Ax=b</m>, for varying <m>b</m>, all look <em>exactly the same</em> and are <em>parallel to each other</em>.
        </p>
        <p>
          (Unless <m>Ax=b</m> is inconsistent, in which case the solution set is empty.)
        </p>
      </bluebox>

      <example hide-type="true">
        <title>Interactive: Solution Sets for Varying <m>b</m></title>
        <figure>
          <caption>Visualization of the solution sets of the equation <m>Ax=b</m> for varying values of <m>b</m>.  Move the head of <m>b</m> to see how the solution set of <m>Ax=b</m> changes, and notice that the solution sets are <em>parallel lines</em>.</caption>
          <mathbox source="demos/Axequalsb.html?mat=2,1,12:1,2,9&amp;x=1,-1,0&amp;closed&amp;lock=true" height="500px"/>
        </figure>
      </example>

      <example xml:id="solnsets-eg-line2">
        <title>The Solution Set is a Line</title>
        <statement>
          <p>
            Write the solution set of <m>Ax=b</m> as a translate of a span, where
            <me>A = \mat{1 -3; 2 -6} \sptxt{and} b = \vec{-3 -6},</me>
            and draw the solution set.  (Compare to this <xref ref="solnsets-eg-line"/>, where we solved the corresponding homogeneous equation.)
          </p>
        </statement>
        <answer>
          <p>
            We perform Gauss<ndash/>Jordan elimination on the associated augmented matrix:
            <me>
              \amat{1 -3 -3; 2 -6 -6} \RREF \amat{1 -3 -3; 0 0 0}.
            </me>
            This corresponds to the single equation <m>x_1 - 3x_2 = -3</m>.  We can write the parametric form including the redundant equation <m>x_2=x_2</m>:
            <me>
              \syseq{x_1 = -3 + 3x_2; x_2 = \. \+ x_2\rlap.}
            </me>
            We turn the above system into a single <em>vector equation</em>:
            <me>
              x = \vec{x_1 x_2} = \vec{-3 0} + x_2\vec{3 1}.
            </me>
            Hence we can write the solution set as
            <me>
              \vec{-3 0} + \Span\left\{\vec{3 1}\right\}.
            </me>
            Here is a picture of the the solution set:
            <latex-code>
              <![CDATA[
\begin{tikzpicture}[thin border nodes]
  \draw[grid lines] (-6,-2) grid (6,3);
  \path[clip] (-6,-2) rectangle (6,3);
  \draw (-6,0) -- (6,0);
  \draw (0,-2) -- (0,3);
  \draw[seq2] (-6,-2) -- node[pos=.8,below=1mm,sloped,whitebg] {$Ax=0$} (6,2);
  \draw[seq4] (-6,-1) -- node[pos=.7,above=1mm,sloped,whitebg] {$Ax=b$} (6,3);
  \point (a) at (-3,0);
  \draw[vector, seq1] (a) -- node[above left] {$(3,1)$} (0,1);
  \draw[->, vector, seq3] (0,0) -- node[pos=.3,above=1pt] {$(-3,0)$} (a);
  \point at (0,0);
\end{tikzpicture}
              ]]>
            </latex-code>
          </p>
        </answer>
      </example>

      <example xml:id="solnsets-eg-plane2">
        <title>The Solution Set is a Plane</title>
        <statement>
          <p>
            Write the solution set of <m>Ax=b</m> as a translate of a span, where
            <me>A = \mat{1 -1 2; -2 2 -4} \sptxt{and} b = \vec{1 -2},</me>
            and draw the solution set.  (Compare to this <xref ref="solnsets-eg-plane"/>, where we solved the corresponding homogeneous equation.)
          </p>
        </statement>
        <answer>
          <p>
            We perform Gauss<ndash/>Jordan elimination on the associated augmented matrix:
            <me>
              \amat{1 -1 2 1; -2 2 -4 -2} \RREF \amat{1 -1 2 1; 0 0 0 0}.
            </me>
            This corresponds to the single equation <m>x_1 - x_2 + 2x_3 = 1</m>.  We write the parametric form including the redundant equations <m>x_2=x_2</m> and <m>x_3=x_3</m>:
            <me>
              \syseq{x_1 = 1 + x_2 - 2x_3; x_2 = \. \+ x_2; x_3 = \. \+ \. \+ x_3\rlap.}
            </me>
            We turn the above system into a single vector equation:
            <me>
              x = \vec{x_1 x_2 x_3} = \vec{1 0 0} + x_2\vec{1 1 0} + x_3\vec{-2 0 1}.
            </me>
            Hence we can write the solution set as
            <me>
              \vec{1 0 0} + \Span\left\{\vec{1 1 1},\;\vec{-2 0 1}\right\}.
            </me>
            Here is a picture of the solution set:
            <latex-code>
              <![CDATA[
  \begin{tikzpicture}[myxyz]
    \path[clip, resetxy] (-6,-4) rectangle (6,4);

    \def\v{(1, 1, 0)}
    \def\w{(-2, 0, 1)}
    \def\pp{(1, 0, 0)}

    \node[coordinate] (X) at \v  {};
    \node[coordinate] (Y) at \w  {};
    \node[coordinate] (P) at \pp {};

    \begin{scope}[x=(X), y=(Y), , xshift=-.8cm, yshift=-.5cm, transformxy]
      \path[clip] (-5, 0) -- (-5, -5) -- (5, -5) -- (5, 0) -- cycle;
      \fill[seq4!30, nearly opaque] (-3,-2) rectangle (3,2);
      \draw[step=1cm, seq4, very thin] (-3,-2) grid (3,2);
    \end{scope}

    \draw (0,0,-3) -- (0,0,0);

    \begin{scope}[transformxy]
      \fill[white, nearly opaque] (-2, -3) rectangle (4, 3);
      \draw[grid lines] (-2, -3) grid (4, 3);
      \draw[->] (-2,0) -- (4,0);
      \draw[->] (0,-3) -- (0,3);
    \end{scope}

    \draw[->] (0,0,0) -- (0,0,3);

    \begin{scope}[x=(X), y=(Y), xshift=-.8cm, yshift=-.5cm, transformxy]
      \path[clip] (-5, 0) -- (-5, 5) -- (5, 5) -- (5, 0) -- cycle;
      \fill[seq4!30, nearly opaque] (-3,-2) rectangle (3,2);
      \draw[step=1cm, seq4, very thin] (-3,-2) grid (3,2);
    \end{scope}

    \draw[vector, seq1] \pp -- ($(X) + (P)$) node[below] {$(-2,0,1)$};
    \draw[vector, seq2] \pp -- ($(Y) + (P)$) node[above] {$(1,1,1)$};
    \draw[thin, densely dotted] ($(Y) + (P)$) -- (-1, 0, 0);
    \draw[vector, seq3, opacity=.5] (0,0,0) -- node[below right, thin border] {$(1,0,0)$} \pp;

    \node[seq4, anchor=south east] at (-2,-2.5,.5) {$Ax=b$};

    \point at \pp;
    \point at (0,0,0);

  \end{tikzpicture}
              ]]>
            </latex-code>
          </p>
        </answer>
      </example>

      <example xml:id="solnsets-eg-point">
        <title>The Solution Set is a Point</title>
        <statement>
          <p>
            Write the solution set of <m>Ax=b</m> as a translate of a span, where
            <me>A = \mat{1 3 4; 2 -1 2; 1 0 1} \sptxt{and} b = \vec{0 1 0}.</me>
            (Compare to this <xref ref="solnsets-eg-no-nontrivial"/>, where we solved the corresponding homogeneous equation.)
          </p>
        </statement>
        <answer>
          <p>
            We perform Gauss<ndash/>Jordan elimination on the associated augmented matrix:
            <me>
              \amat{1 3 4 0; 2 -1 2 1; 1 0 1 0} \RREF \amat{1 0 0 -1; 0 1 0 -1; 0 0 1 1}.
            </me>
            There are no free variables, so the only solution is <m>p=(-1, -1, 1)</m>.
          </p>

          <p>
            According to this <xref ref="solnsets-translate-span"/>, the solution set is supposed to be a translate of a span by <m>p</m>.  We saw in the previous <xref ref="solnsets-eg-no-nontrivial"/> that the only solution of <m>Ax=0</m> is the trivial solution, i.e., that the solution set is the one-point set <m>\{0\}</m>.  By <xref ref="span-empty-set" text="title">convention</xref>, the point is the span of the empty set: <m>\{0\} = \Span\{\}</m>.  So we can write the solution set of the inhomogeneous equation <m>Ax=b</m> as
            <me>\left\{\vec{-1 -1 1}\right\} = \vec{-1 -1 1} + \Span\{\}.</me>
            <latex-code>
              <![CDATA[
  \begin{tikzpicture}[myxyz, x={(-.3cm,-.5cm)}, z={(0cm,1.3cm)}, thin border nodes]
    \path[clip, resetxy] (-6,-4) rectangle (6,4);

    \def\v{(-1, -1, 1)}

    \begin{scope}[transformxy]
      \fill[white, nearly opaque] (-3, -3) rectangle (3, 3);
      \draw[grid lines] (-3, -3) grid (3, 3);
      \draw[->] (-3,0) -- (3,0);
      \draw[->] (0,-3) -- (0,3);
    \end{scope}

    \draw[vector, seq3] (0,0,0) -- \v;

    \draw[thin, densely dotted] \v -- (-1, -1, 0);
    \point[fill=seq-violet, "$Ax=b\,$" {above, seq-violet}] at \v;
    \point[fill=seq-blue, "$Ax=0$" {below right, seq-blue}] at (0,0,0);

  \end{tikzpicture}
              ]]>
            </latex-code>
          </p>
        </answer>
      </example>

    </paragraphs>


    <p>
      We can summarize the row picture of a system of equations as follows.
    </p>

    <note hide-type="true">
      <title>Summary</title>
      <p>
        <ul>
          <li>
            The solution set of the <alert>homogenous equation</alert> <m>Ax=0</m> is a <alert>span</alert>.
          </li>
          <li>
            The solution set of the <alert>inhomogeneous equation</alert> <m>Ax=b\;(b\neq0)</m> is <alert>not a span</alert>: it is a <em>translate</em> of the solution set of <m>Ax=0</m> by a particular solution (or it is empty).
          </li>
        </ul>
        In particular, the solution sets of <m>Ax=b</m> for varying values of <m>b</m> all look <em>the same</em> and are <em>parallel to each other</em> (or are empty).
      </p>
    </note>

    <note xml:id="span-is-parametric">
      <p>
        Expressing a solution set as a (translate of a) span means writing it in <em>parametric form</em>:
        <me>
          \def\r{\textcolor{seq-red}}
          \begin{split}
            x\in\vec{-2 0 2 0} &amp;+ \Span\left\{\vec{-2 1 0 0},\;\vec{1 0 -1 1}\right\} \\
            &amp;\iff x = \vec{-2 0 2 0} + \r c \vec{-2 1 0 0} + \r d \vec{1 0 -1 1}.
          \end{split}
        </me>
        The parameters <m>\textcolor{seq-red}c,\textcolor{seq-red}d</m> are the <em>weights</em> in a linear combination.  So one should think:
        <latex-code>
\begin{tikzpicture}
  \node[align=center, draw=blue!50, thick, rounded corners, inner sep=2mm]
    (A) {writing a\\linear space\\as a span};
  \node[align=center, draw=blue!50, thick, rounded corners, inner sep=2mm,
        right=3cm of A.east]
   (B) {parametric\\description};
   \draw ($(A.east)+(2mm,1mm)$) -- ($(B.west)+(-2mm,1mm)$);
   \draw ($(A.east)+(2mm,0mm)$) -- ($(B.west)+(-2mm,0mm)$);
   \draw ($(A.east)+(2mm,-1mm)$) -- ($(B.west)+(-2mm,-1mm)$);
\end{tikzpicture}
        </latex-code>
      </p>
    </note>

  </subsection>


  <subsection xml:id="col-picture">
    <title>The Column Picture</title>
    <idx><h>Column picture</h></idx>

    <p>
      The column picture contains the set of vectors <m>b</m> making <m>Ax=b</m> consistent.  In order to express this as a span, it is convenient to write a system of linear equations as a vector equation.
    </p>

    <paragraphs>
      <title>Vector Equations</title>

      <p>
        <idx><h>Vector equation</h></idx>
        Recall from this <xref ref="defn-four-ways"/> that a system of linear equations can be written as a <term>vector equation</term>:
        <me>
          \def\r{\textcolor{seq-red}}
          \def\g{\textcolor{seq-green}}
          \def\p{\textcolor{seq-violet}}
          \mat{
            \r1 \g{-1};
            \r2 \g{-2};
            \r6 \g{-1}
          }\vec{x_1 x_2 x_3} = \vec{\p8 \p{16} \p3}
          \quad\iff\quad
          x_1\vec{\r1 \r2 \r6} + x_2\vec{\g{-1} \g{-2} \g{-1}} = \vec{\p8 \p{16} \p3}.
        </me>
        In general, a vector equation is an equation of the form
        <men xml:id="vec-eqn-general-form">
          x_1v_1 + x_2v_2 + \cdots + x_nv_n = b
        </men>
        for vectors <m>v_1,v_2,\ldots,v_n,b\in\R^m</m> and unknown <em>weights</em> <m>x_1,x_2,\ldots,x_n</m>.  Note that the left side of this equation is simply a linear combination of <m>v_1,v_2,\ldots,v_n</m>.  Using the <q>by columns</q> approach to <xref ref="matrix-vector-product" text="title">matrix-vector multiplication</xref>, the vector equation <xref ref="vec-eqn-general-form"/> becomes equivalent to the matrix equation <m>Ax=b</m>, where <m>A</m> has columns <m>v_1,v_2,\ldots,v_n</m> and <m>x = (x_1,x_2,\ldots,x_n)</m> is the unknown vector:
        <me>
          x_1v_1 + x_2v_2 + \cdots + x_nv_n = b
          \quad\iff\quad
          \mat[c]{| | {} |; v_1 v_2 \cdots, v_n; | | {} |}
          \vec[c]{x_1 x_2 \vdots, x_n}
          = b.
        </me>
        It follows that one can <em>solve</em> a vector equation <xref ref="vec-eqn-general-form"/> by performing elimination on the augmented matrix
        <me>\amat{A b} = \amat[c]{| | {} | |; v_1 v_2 \cdots, v_n b; | | {} | |} </me>.
      </p>

      <example xml:id="vec-eqn-consistent">
        <title>A Consistent Vector Equation</title>
        <statement>
          <p>
            Solve the vector equation
            <me> x_1\vec{1 2 6} + x_2\vec{-1 -2 -1} = \vec{8 16 3}. </me>
          </p>
        </statement>
        <answer>
          <p>
            We form an augmented matrix and perform Gaussian elimination:
            <me>
              \amat{1 -1 8; 2 -2 16; 6 -1 3}
              \REF
              \amat{1 -1 8; 0 5 -45; 0 0 0}.
            </me>
            Back-substitution yields <m>(x_1,x_2) = (-1, -9),</m> so the solution is
            <me> (-1)\vec{1 2 6} + (-9)\vec{-1 -2 -1} = \vec{8 16 3}. </me>
            Note that we have expressed <m>(8,16,3)</m> (the <m>b</m>-vector) as a linear combination of <m>(1,2,6)</m> and <m>(-1,-2,-1)</m> (the vectors <m>v_1,v_2</m>).
          </p>
        </answer>
      </example>

      <example xml:id="vec-eqn-inconsistent">
        <title>An Inconsistent Vector Equation</title>
        <statement>
          <p>
            Solve the vector equation from the previous <xref ref="vec-eqn-consistent"/>, but with a different vector on the right side:
            <me> x_1\vec{1 2 6} + x_2\vec{-1 -2 -1} = \vec{2 -2 0}. </me>
          </p>
        </statement>
        <answer>
          <p>
            We form an augmented matrix and perform Gaussian elimination:
            <me>
              \amat{1 -1 2; 2 -2 -2; 6 -1 0}
              \REF
              \amat{1 -1 2; 0 5 -12; 0 0 \color{seq-red}-6}.
            </me>
            There is a pivot in the augmented column, so this system has no solution: it is <em>inconsistent</em>.  It follows that there do not exist scalars <m>x_1,x_2</m> satisfying the equation
            <me> x_1\vec{1 2 6} + x_2\vec{-1 -2 -1} = \vec{2 -2 0}, </me>
            so <m>(2,-2,0)</m> is <em>not</em> a linear combination of <m>(1,2,6)</m> and <m>(-1,-2,-1)</m>.
          </p>
        </answer>
      </example>

    </paragraphs>

    <paragraphs>
      <title>The Column Picture Criterion for Consistency</title>

      <p>
        The vector equation <xref ref="vec-eqn-general-form"/> has a solution if and only if <m>b</m> is a linear combination of the vectors <m>v_1,v_2,\ldots,v_n</m>, in which case the weights <m>x_1,x_2,\ldots,x_n</m> form the solution of the system.  In terms of matrix equations, the system <m>Ax=b</m> is consistent if and only if <m>b</m> is a linear combination of the columns of <m>A</m>, in which case <m>x</m> is the vector of weights.  Saying <q><m>b</m> is a linear combination of the columns of <m>A</m></q> is the same thing as saying <q><m>b</m> is contained in the span of the columns of <m>A</m>,</q> so this gives rise to the following important criterion.
      </p>

      <bluebox xml:id="col-picture-criterion-consistency">
        <title>The Column Picture Criterion for Consistency</title>
        <idx><h>Column picture criterion for consistency</h></idx>
        <idx><h>System of linear equations</h><h>consistent</h><h>column picture criterion</h></idx>
        <p>
          <me>
            Ax=b \text{ is \emph{consistent}} \quad\iff\quad
            b\in\Span\bigl\{\text{columns of $A$}\bigr\},
          </me>
          in which case <m>x</m> is the vector of weights in an expression for <m>b</m> as a linear combination of the columns of <m>A</m>.
        </p>
      </bluebox>
    </paragraphs>

    <specialcase xml:id="col-picture-consistent">
      <p>
        The matrix equation
        <me> \mat{1 -1; 2 -2; 6 -1}\vec{x_1 x_2} = \vec{8 16 3} </me>
        from this <xref ref="vec-eqn-consistent"/> has the solution <m>(x_1,x_2)=(-1,-9)</m>.  Since it is consistent, the <xref ref="col-picture-criterion-consistency">criterion</xref> says that
        <me>
          \vec{8 16 3} \in \Span\left\{\vec{1 2 6},\;\vec{-1 -2 -1}\right\}.
        </me>
        This is something that we can visualize, since we can draw a picture of a span.
        <latex-code>
\begin{tikzpicture}[thin border nodes, myxyz, scale=.5]

  \path[clip, resetxy] (-4,-6) rectangle (11,7);

  \def\v{(1,2,6)}
  \def\w{(-1,-2,-1)}
  \def\b{(8,16,3)}

  \node[coordinate] (X) at \v {};
  \node[coordinate] (Y) at \w {};

  \begin{scope}[x=(X), y=(Y), transformxy]
    \path[clip] (0,2) -- (2/5,12/5) -- (-5/3,-10) -- (-2,-31/3) -- cycle;
    \fill[seq4!30, nearly opaque] (-2,-11) rectangle (1.5,3);
    \draw[step=1cm, seq4, very thin] (-2,-11) grid (1.5,3);
  \end{scope}

  \draw[vector, seq-green] (0,0,0) --
    node [midway, below=1mm, font=\small] {$\vec{-1 -2 -1}$} \w;
  \draw[thin, densely dotted] \w -- \projxy\w;

  \begin{scope}[transformxy]
    \fill[white, opacity=.5] (-2, -4) rectangle (9, 17);
    \draw[grid lines] (-2, -4) grid (9, 17);
  \end{scope}

  \begin{scope}[x=(X), y=(Y), transformxy]
    \path[clip] (-5/3,-10) -- (0,-25/3) -- (3/2,7/2) -- (2/5,12/5) -- cycle;
    \fill[seq4!30, nearly opaque] (-2,-11) rectangle (1.5,4);
    \draw[step=1cm, seq4, very thin] (-2,-11) grid (1.5,4);
  \end{scope}

  \draw[vector, seq-blue] (0,0,0) --
    node [midway, left=1mm, font=\small] {$\vec{1 2 6}$} \v;
  \draw[thin, densely dotted] \v -- \projxy\v;

  \draw[vector] (0,0,0) --
    node [midway, above, font=\small] {$\vec{8 16 3}$} \b;
  \draw[thin, densely dotted] \b -- \projxy\b;

  \point at (0,0,0);

\end{tikzpicture}
        </latex-code>
        This is the <term>column picture</term>: it contains the columns of the matrix and the <m>b</m>-vector.
      </p>

      <p>
        We had a different picture of a consistent system of equations in <xref ref="systems-eqns"/>.  The matrix equation above can be written as the system of equations
        <me>
          \def\r{\color{seq-red}}
          \def\g{\color{seq-green}}
          \def\b{\color{seq-blue}}
          \syseq{
            \r x_1 \mathbin{\r-} \r x_2 \mathbin{\r=} \r8;
            \g2x_1 \mathbin{\g-} \g2x_2 \mathbin{\g=} \g16;
            \b6x_1 \mathbin{\b-} \b x_2 \mathbin{\b=} \b3\rlap.}
        </me>
        Each equation defines a line in the plane, and the solution is the point at which all three lines intersect.
        <latex-code>
\begin{tikzpicture}[thin border nodes, scale=.8]

  \draw[grid lines] (-4, -13) grid (2, -5);

  \draw[line width=1mm, seq-green] (-4,-12) --
    node[sloped, pos=.8, font=\small, above=1mm, whitebg] {$2x_1-2x_2=16$} (2,-6);
  \draw[thick, seq-red] (-4,-12) --
    node[sloped, pos=.3, font=\small, above=1mm, whitebg] {$x_1-x_2=8$} (2,-6);
  \draw[thick, seq-blue] (-1/3,-5) --
    node[pos=.3, font=\small, left=1mm, whitebg] {$6x_1 - x_2 = 3$} (-5/3,-13);

  \point[seq-orange, "{$(-1,-9)$}" {seq-orange, font=\small, below right}] at (-1,-9);

\end{tikzpicture}
        </latex-code>
        This is the <term>row picture</term>: it contains the solutions (the <m>x</m>-vectors).
      </p>

    </specialcase>

    <example hide-type="true">
      <title>Interactive: A Consistent System of Equations</title>

      <figure>
        <caption>The equation <m>A{x\choose y}=b</m> from this <xref ref="col-picture-consistent"/> is consistent because <m>b</m> is contained in the span (drawn in violet) of the columns of <m>A</m>.  The solution <m>(x,y)</m> is the vector of weights attached to the columns <m>v_1,v_2</m>.  Move the sliders to find values of <m>x</m> and <m>y</m> satisfying <m>A{x\choose y}=b</m>.</caption>
        <mathbox source="demos/spans.html?v1=1,2,6&amp;v2=-1,-2,-1&amp;target=8,16,3&amp;tlabel=b&amp;range=20&amp;camera=3,.5,1.5" height="500px"/>
      </figure>
    </example>

    <specialcase xml:id="col-picture-inconsistent">
      <p>
        The matrix equation
        <me> \mat{1 -1; 2 -2; 6 -1}\vec{x_1 x_2} = \vec{2 -2 0} </me>
        from this <xref ref="vec-eqn-inconsistent"/> has no solution.  Since it is inconsistent, the <xref ref="col-picture-criterion-consistency">criterion</xref> says that
        <me>
          \vec{2 -2 0} \notin \Span\left\{\vec{1 2 6},\;\vec{-1 -2 -1}\right\}.
        </me>
        This is also something that we can visualize.
        <latex-code>
\begin{tikzpicture}[thin border nodes, myxyz, scale=.5]

  \path[clip, resetxy] (-6,-6) rectangle (7,7);

  \def\v{(1,2,6)}
  \def\w{(-1,-2,-1)}
  \def\b{(2,-2,0)}

  \node[coordinate] (X) at \v {};
  \node[coordinate] (Y) at \w {};

  \begin{scope}[x=(X), y=(Y), transformxy]
    \path[clip] (0,2) -- (2/5,12/5) -- (-5/3,-10) -- (-2,-31/3) -- cycle;
    \fill[seq4!30, nearly opaque] (-2,-11) rectangle (1.5,3);
    \draw[step=1cm, seq4, very thin] (-2,-11) grid (1.5,3);
  \end{scope}

  \draw[vector, seq-green] (0,0,0) --
    node [midway, below=1mm, font=\small] {$\vec{-1 -2 -1}$} \w;
  \draw[thin, densely dotted] \w -- \projxy\w;

  \begin{scope}[transformxy]
    \fill[white, opacity=.5] (-2, -4) rectangle (9, 17);
    \draw[grid lines] (-2, -4) grid (9, 17);
  \end{scope}

  \begin{scope}[x=(X), y=(Y), transformxy]
    \path[clip] (-5/3,-10) -- (0,-25/3) -- (3/2,7/2) -- (2/5,12/5) -- cycle;
    \fill[seq4!30, nearly opaque] (-2,-11) rectangle (1.5,4);
    \draw[step=1cm, seq4, very thin] (-2,-11) grid (1.5,4);
  \end{scope}

  \draw[vector, seq-blue] (0,0,0) --
    node [midway, left=1mm, font=\small] {$\vec{1 2 6}$} \v;
  \draw[thin, densely dotted] \v -- \projxy\v;

  \draw[vector] (0,0,0) --
    node [pos=1, above=1mm, font=\small] {$\vec{2 -2 0}$} \b;

  \point at (0,0,0);

\end{tikzpicture}
        </latex-code>
        This is the <term>column picture</term>: it contains the columns of the matrix and the <m>b</m>-vector.
      </p>

      <p>
        We also had a different picture of an inconsistent system of equations in <xref ref="systems-eqns"/>.  The matrix equation above can be written as the system of equations
        <me>
          \def\r{\color{seq-red}}
          \def\g{\color{seq-green}}
          \def\b{\color{seq-blue}}
          \syseq{
            \r x_1 \mathbin{\r-} \r x_2 \mathbin{\r=} \r2;
            \g2x_1 \mathbin{\g-} \g2x_2 \mathbin{\g=} \g-2;
            \b6x_1 \mathbin{\b-} \b x_2 \mathbin{\b=} \b0\rlap.}
        </me>
        These equations define three lines in the plane which do not have a common intersection point.
        <latex-code>
\begin{tikzpicture}[thin border nodes, scale=.8]

  \draw[grid lines] (-3, -4) grid (3, 4);

  \draw[thick, seq-green] (-3,-2) --
    node[sloped, pos=.7, font=\small, below=1mm, whitebg] {$2x_1-2x_2=-2$} (3,4);
  \draw[thick, seq-red] (-3,-4) --
    node[sloped, pos=.3, font=\small, above=1mm, whitebg] {$x_1-x_2=2$} (3,2);
  \draw[thick, seq-blue] (-2/3,-4) --
    node[pos=.8, font=\small, left=1mm, whitebg] {$6x_1 - x_2 = 0$} (2/3,4);

\end{tikzpicture}
        </latex-code>
        This is the <term>row picture</term>: it contains the solutions (the <m>x</m>-vectors).
      </p>

    </specialcase>

    <example hide-type="true">
      <title>Interactive: An Inconsistent System of Equations</title>

      <figure>
        <caption>The equation <m>A{x\choose y}=b</m> from this <xref ref="col-picture-inconsistent"/> is inconsistent because <m>b</m> is not contained in the span (drawn in violet) of the columns of <m>A</m>.  Move the sliders convince yourself that there are no values of <m>x</m> and <m>y</m> satisfying <m>A{x\choose y}=b</m>.</caption>
        <mathbox source="demos/spans.html?v1=1,2,6&amp;v2=-1,-2,-1&amp;target=2,-2,0&amp;tlabel=b&amp;range=10&amp;camera=3,.5,1.5" height="500px"/>
      </figure>
    </example>

  </subsection>

  <subsection>
    <title>The Row and Column Pictures</title>

    <p>
      Combining the row and column pictures of a system of equations <m>Ax=b</m> gives us a good geometric understanding of the solution sets for varying values of <m>b</m>.
    </p>

    <note hide-type="true">
      <title>Summary</title>
      <idx><h>Row picture</h></idx>
      <idx><h>Column picture</h></idx>
      <p>Consider a matrix equation <m>Ax=b</m>.</p>
      <p>
        <alert>Row Picture:</alert> For a given value of <m>b</m>,
        <me>
          \vec[c]{\text{all solutions} \text{of $Ax=b$}}
          =
          \vec[c]{\text{some solution} \text{of $Ax=b$}}
          + \vec[c]{\text{all solutions} \text{of $Ax=0$}},
        </me>
        if there is a solution.  The solution set of <m>Ax=0</m> is a span, and all other nonempty solution sets are <em>parallel</em> and look the <em>same</em>.
      </p>
      <p>
        <alert>Column Picture:</alert> The system of equations <m>Ax=b</m> is <em>consistent</em> if and only if <m>b</m> is in the span of the columns of <m>A</m>.
      </p>
    </note>

    <p>
      The <alert>solution set</alert> and the <alert>span of the columns</alert> are both described by spans.  Do not confuse these two geometric constructions!  The first is concerned with solutions (<m>x</m> vectors, in the row picture), and the second is concerned with which <m>b</m> vectors make the system <m>Ax=b</m> consistent (the column picture).  Thus there are (so far) <em>two different spans</em> associated to a matrix <m>A</m>.
    </p>

    <bluebox>
      <idx><h>Row picture</h></idx>
      <idx><h>Column picture</h></idx>
      <p>
        The <term>row picture</term> is a drawing of the solutions of a system of equations, i.e., the set of <m>x</m>-vectors satisfying <m>Ax=b</m>.  It is a contained <m>\R^n</m>, where <m>n</m> is the number of <em>columns</em> of <m>A</m>.
      </p>
      <p>
        The <term>column picture</term> is a drawing of the set of all vectors <m>b</m> making the equation <m>Ax=b</m> consistent.  It is a subspace of <m>\R^m</m>, where <m>m</m> is the number of <em>rows</em> of <m>A</m>.
      </p>
    </bluebox>

    <p>
      When we draw both the row picture and the column picture at the same time, we will place the row picture on the left and the column picture on the right.
      <latex-code>
\begin{tikzpicture}[thin border nodes, scale=.7]

  \begin{scope}
    \node[above=1mm] at (0,4) {Row Picture};

    \draw[grid lines] (-4, -4) rectangle (4, 4);
    \clip (-4, -4) rectangle (4, 4);

    \draw[thick, black!40] (-4,-2.5) --
      node[pos=.7, above=1mm, sloped, font=\small] {$Ax=0$}
      (4,2.5);

    \draw[thick vector, seq-red] (0,0) to["$x$"] (-.7,1.5);

    \draw[thick, seq-violet] ($(-4,-2.5) + (-.7,1.5)$) --
      node[pos=.7, above=1mm, sloped, font=\small] {$Ax=b$}
      ($(4,2.5) + (-.7,1.5)$);

    \point at (0,0);

    \node[font=\large] at (2,-2) {$\R^n$};

  \end{scope}

  \draw[very thick, ->] (4.3,.5)
     to[bend left, "multiply" above=3pt, "by $A$"' below=1mm] (8.7,.5);

  \begin{scope}[xshift=13cm]
    \node[above=1mm] at (0,4) {Column Picture};

    \draw[grid lines] (-4, -4) rectangle (4, 4);
    \clip (-4, -4) rectangle (4, 4);

    \draw[thick, seq-blue] (-3.5,4) --
      node[pos=.75, above=1mm, sloped, font=\small] {$\Span\bigl\{\text{cols of }A\bigr\}$}
      (3.5,-4);

    \draw[thick vector, seq-red] (0,0) to["$b=Ax$"] ($.4*(-3.5,4)$);

    \point at (0,0);

    \node[font=\large] at (2,2) {$\R^m$};

  \end{scope}


\end{tikzpicture}
      </latex-code>
      In this picture, we think of <m>A</m> as a <em>function</em>.  Its <em>input</em> is a vector <m>x\in\R^n</m> (in the row picture), and its <em>output</em> is the vector <m>b = Ax\in\R^m</m> (the column picture).  Solving <m>Ax=b</m> means finding all inputs <m>x</m> with output equal to <m>b</m>.
    </p>

    <p>
      The following demos encapsulate much of what we have learned so far.
    </p>

    <example hide-type="true">
      <title>Interactive: Row and Column Pictures (1)</title>
      <figure>
        <caption>Left: the solution set of <m>Ax=b</m> is in violet.  Right: the span of the columns of <m>A</m> is in violet.  As you move <m>x</m>, you change <m>b</m>, so the solution set changes<mdash/>but all solution sets are parallel lines.  If you move <m>b</m> within the span of the columns, the solution set also changes, and the demo solves the equation to find a particular solution <m>x</m>.  If you move <m>b</m> outside of the span of the columns, the system becomes inconsistent, and the solution set disappears.
        </caption>
        <mathbox source="demos/Axequalsb.html?mat=1,3:2,6&amp;x=1,1" height="600px"/>
      </figure>
    </example>

    <example hide-type="true">
      <title>Interactive: Row and Column Pictures (2)</title>
      <figure>
        <caption>Left: the solution set of <m>Ax=b</m> is in violet.  Right: the span of the columns of <m>A</m> is in violet.  As you move <m>x</m>, you change <m>b</m>, so the solution set changes<mdash/>but all solution sets are parallel planes.  If you move <m>b</m> within the span of the columns, the solution set also changes, and the demo solves the equation to find a particular solution <m>x</m>.  If you move <m>b</m> outside of the span of the columns, the system becomes inconsistent, and the solution set disappears.
        </caption>
        <mathbox source="demos/Axequalsb.html" height="600px"/>
      </figure>
    </example>

    <example hide-type="true" xml:id="solnsets-line-plane">
      <title>Interactive: Row and Column Pictures (3)</title>
      <figure>
        <caption>Left: the solution set of <m>Ax=b</m> is in violet.  Right: the span of the columns of <m>A</m> is in violet.  As you move <m>x</m>, you change <m>b</m>, so the solution set changes<mdash/>but all solution sets are parallel lines.  If you move <m>b</m> within the span of the columns, the solution set also changes, and the demo solves the equation to find a particular solution <m>x</m>.  If you move <m>b</m> outside of the span of the columns, the system becomes inconsistent, and the solution set disappears.
        </caption>
        <mathbox source="demos/Axequalsb.html?mat=1,0,-1:0,1,1:1,1,0" height="600px"/>
      </figure>
    </example>

    <example hide-type="true" xml:id="solnsets-always-consistent">
      <title>Interactive: Row and Column Pictures (4)</title>
      <figure>
        <caption>Left: the solution set of <m>Ax=b</m> is in violet.  Right: the span of the columns of <m>A</m> is in violet.  As you move <m>x</m>, you change <m>b</m>, so the solution set changes<mdash/>but all solution sets are parallel lines.  If you move <m>b</m>, the solution set also changes, and the demo solves the equation to find a particular solution <m>x</m>.  Note that it is impossible to move <m>b</m> outside of the span of the columns, so <m>Ax=b</m> is consistent for all values of <m>b</m> in this example.
        </caption>
        <mathbox source="demos/Axequalsb.html?mat=2,1,12:1,2,9&amp;x=1,1,0" height="600px"/>
      </figure>
    </example>

  </subsection>

</section>
